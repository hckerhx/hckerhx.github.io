<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metro Quarterly Sales Weather Impact Analysis System</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <h1>Metro Weather Impact Analysis</h1>
                </div>
                <p class="subtitle">Analyze how extreme weather events affect Metro's quarterly sales in Canada</p>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Time selection section -->
            <section class="time-selector-section">
                <div class="card">
                    <h2><i class="fas fa-calendar-alt"></i> Select Analysis Time Range</h2>
                    <form class="time-form" id="timeForm">
                        <div class="form-group">
                            <label for="startDate">Start Date:</label>
                            <input type="date" id="startDate" name="startDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="endDate">End Date:</label>
                            <input type="date" id="endDate" name="endDate" required>
                        </div>
                        
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-search"></i> Run Analysis
                        </button>
                    </form>
                    
                    <div class="info-box">
                        <i class="fas fa-info-circle"></i>
                        <p>The system will automatically identify the quarters within the selected range and analyze how extreme weather events affect Metro's sales.</p>
                    </div>
                </div>
            </section>

            <!-- Analysis results section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <!-- Quarter information card -->
                <div class="card">
                    <h2><i class="fas fa-chart-line"></i> Quarterly Analysis Results</h2>
                    <div class="quarter-info" id="quarterInfo">
                        <!-- Quarter info will be generated here -->
                    </div>
                </div>

                <!-- Weather event impact -->
                <div class="card">
                    <h3><i class="fas fa-cloud-rain"></i> Extreme Weather Event Impact</h3>
                    <div class="weather-events" id="weatherEvents">
                        <!-- Weather event list will be generated here -->
                    </div>
                </div>

                <!-- Sales trend chart -->
                <div class="card">
                    <h3><i class="fas fa-chart-area"></i> Sales Trend Analysis</h3>
                    <div class="chart-container">
                        <canvas id="salesChart" style="height: 400px;"></canvas>
                    </div>
                </div>

                <!-- Weather impact comparison -->
                <div class="card">
                    <h3><i class="fas fa-balance-scale"></i> Weather Impact Comparison</h3>
                    <div class="chart-container">
                        <canvas id="weatherImpactChart" style="height: 350px;"></canvas>
                    </div>
                </div>

                <!-- Detailed statistics -->
                <div class="card">
                    <h3><i class="fas fa-table"></i> Detailed Statistics</h3>
                    <div class="stats-grid" id="statsGrid">
                        <!-- Statistics will be generated here -->
                    </div>
                </div>
            </section>

            <!-- Loading state -->
            <section class="loading-section" id="loadingSection" style="display: none;">
                <div class="card text-center">
                    <div class="loading-spinner">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <h3>Analyzing data...</h3>
                    <p>Please wait while the system processes your request and generates the report.</p>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Metro Weather Impact Analysis System. A data analysis tool designed for Metro retailers in Canada.</p>
        </div>
    </footer>

    <script src="js/weather-data.js"></script>
    <script src="js/sales-calculator.js"></script>
    <script src="js/chart-utils.js"></script>
    <script src="js/metro-store-weather.js"></script>
    <script src="js/main.js"></script>
</body>
</html>