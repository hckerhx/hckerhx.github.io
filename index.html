<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>头部公司深跌买入策略实验室</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="language-switcher" role="group" aria-label="语言切换">
        <button class="lang-button active" data-lang="zh">中文</button>
        <button class="lang-button" data-lang="en">EN</button>
    </div>

    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-top">
                    <div class="hero-label" data-i18n="hero.label">策略可视化平台</div>
                </div>
                <h1 data-i18n="hero.title">头部公司深跌买入策略实验室</h1>
                <p class="hero-subtitle" data-i18n="hero.subtitle">
                    当Mag 7 科技龙头因宏观或财报事件急跌超过20%时逆向加仓，持有2-3年，
                    并与长期定投 S&amp;P 500 与 QQQ 的表现进行对比，同时跟踪实时组合净值。
                </p>
                <div class="hero-metrics" id="heroMetrics"></div>
            </div>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container">
                <div class="section-grid">
                    <article class="card">
                        <h2 data-i18n="sections.assumptionsTitle">策略核心假设</h2>
                        <ul class="list">
                            <li data-i18n="sections.assumptionsItems.0">聚焦具备稳定盈利和技术护城河的头部公司。</li>
                            <li data-i18n="sections.assumptionsItems.1">当股价在一个季度内回撤超过20%时触发“深跌买入”。</li>
                            <li data-i18n="sections.assumptionsItems.2">分批买入后持有2-3年，等待业绩与估值修复。</li>
                            <li data-i18n="sections.assumptionsItems.3">持仓收益与 S&amp;P 500、QQQ 定投结果进行长期对照。</li>
                        </ul>
                    </article>
                    <article class="card">
                        <h2 data-i18n="sections.methodologyTitle">数据与方法</h2>
                        <p data-i18n="sections.methodologyBody">
                            历史回测区间覆盖2010-2024年。为突出策略的节奏与风险，我们将关键事件时间线、
                            组合净值走势与核心指标一并呈现。定投参考组合假设每年等额投入并按年度再平衡，
                            数据经过平滑处理以便突出相对趋势。
                        </p>
                        <div class="tag" data-i18n="sections.methodologyTag">结果以100为初始净值，数值为示意回测。</div>
                    </article>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2 data-i18n="sections.mag7Title">Mag 7 策略 vs. 指数定投</h2>
                <p class="section-intro" data-i18n="sections.mag7Intro">
                    深跌买入策略在科技龙头上的表现显示出极强的反弹弹性，尤其在2020年疫情与2022年估值纠偏后，
                    净值恢复速度明显快于被动定投组合。
                </p>
                <div class="chart-card">
                    <canvas id="mag7Chart" aria-label="Mag 7 策略与指数定投对比折线图" role="img"></canvas>
                </div>
            </div>
        </section>

        <section class="section alt">
            <div class="container">
                <h2 data-i18n="sections.timelineTitle">Mag 7 策略操作时间线</h2>
                <p class="section-intro" data-i18n="sections.timelineIntro">
                    追踪每次深跌买入的触发背景、加仓节奏与持有结果，理解策略在不同宏观周期下的执行细节。
                </p>
                <div class="timeline" id="timeline"></div>
            </div>
        </section>

        <section class="section live">
            <div class="container">
                <h2 data-i18n="sections.liveTitle">实时组合净值对比</h2>
                <p class="section-intro" data-i18n="sections.liveIntro">
                    通过接入 Yahoo Finance API，等权跟踪 Mag 7 组合，并与 SPY、QQQ 的日内表现进行实时比较。
                </p>
                <div class="live-grid">
                    <article class="live-card" id="liveMag7">
                        <h3 data-i18n="live.mag7Title">Mag 7 等权组合</h3>
                        <div class="live-metric">
                            <span class="live-label" data-i18n="live.valueLabel">当前指数</span>
                            <span class="live-value" id="mag7LiveValue">--</span>
                        </div>
                        <div class="live-metric">
                            <span class="live-label" data-i18n="live.changeLabel">日内变动</span>
                            <span class="live-change" id="mag7LiveChange">--</span>
                        </div>
                    </article>
                    <article class="live-card" id="liveSp500">
                        <h3 data-i18n="live.spTitle">S&amp;P 500 (SPY)</h3>
                        <div class="live-metric">
                            <span class="live-label" data-i18n="live.valueLabel">当前指数</span>
                            <span class="live-value" id="spLiveValue">--</span>
                        </div>
                        <div class="live-metric">
                            <span class="live-label" data-i18n="live.changeLabel">日内变动</span>
                            <span class="live-change" id="spLiveChange">--</span>
                        </div>
                    </article>
                    <article class="live-card" id="liveQqq">
                        <h3 data-i18n="live.qqqTitle">纳斯达克 100 (QQQ)</h3>
                        <div class="live-metric">
                            <span class="live-label" data-i18n="live.valueLabel">当前指数</span>
                            <span class="live-value" id="qqqLiveValue">--</span>
                        </div>
                        <div class="live-metric">
                            <span class="live-label" data-i18n="live.changeLabel">日内变动</span>
                            <span class="live-change" id="qqqLiveChange">--</span>
                        </div>
                    </article>
                </div>
                <p class="live-updated" id="liveUpdated"></p>
                <p class="live-error" id="liveError" role="alert"></p>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <h2 data-i18n="sections.metricsTitle">核心指标对比</h2>
                <p class="section-intro" data-i18n="sections.metricsIntro">
                    通过CAGR、最大回撤与收益稳定性，观察策略在不同资产池的风险收益特征，
                    并与被动定投方案形成直观对照。
                </p>
                <div class="chart-card">
                    <canvas id="metricsChart" aria-label="策略核心指标柱状图" role="img"></canvas>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th data-i18n="table.headers.strategy">策略</th>
                                <th data-i18n="table.headers.cagr">CAGR</th>
                                <th data-i18n="table.headers.maxDrawdown">最大回撤</th>
                                <th data-i18n="table.headers.tenYear">十年总收益</th>
                                <th data-i18n="table.headers.triggers">触发次数</th>
                            </tr>
                        </thead>
                        <tbody id="metricsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="section insights">
            <div class="container">
                <h2 data-i18n="sections.insightsTitle">策略洞察</h2>
                <div class="insight-grid" id="insights"></div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p data-i18n="footer.note">数据用于策略示意，投资需结合实际财务状况与风险承受能力。</p>
        </div>
    </footer>

    <script src="js/app.js"></script>
</body>
</html>
